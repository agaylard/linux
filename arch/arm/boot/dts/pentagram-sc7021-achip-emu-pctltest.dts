/dts-v1/;

#include "pentagram-sp7021-achip.dtsi"

#include <dt-bindings/interrupt-controller/arm-gic.h>

/ {
	model = "Sunplus SC7021 EMU (CA7) PinCtrl test";
	compatible = "sunplus,sc7021-achip";

	chosen {
		bootargs = "console=ttyS0,115200 root=/dev/ram rw loglevel=8 earlyprintk";
	};

	memory {
		reg = <0x00000000 0x20000000>; /* 512MB */
	};
};

&sdio {
 pinctrl-names = "default";
 pinctrl-0 = <&sdio_pins>;
};
&l2sw {
 pinctrl-names = "default";
 pinctrl-0 = <&ethA_pins>;
};
&eth_phy0 {
 pinctrl-names = "default";
 pinctrl-0 = <&eth0_pins>;
};
&eth_phy1 {
 pinctrl-names = "default";
 pinctrl-0 = <&eth1_pins>;
};

&pctl {
 /*** non-device binded ***/
 /* pinctrl-names = "default"; */
 /* pinctrl-0 = <&ethA_pins &eth0_pins &eth1_pins>; */

 /* for all eth */
 sdio_pins: pinmux_sdio_pins {
  sppctl,pins = <
       SC7021_IOPAD(17,SC7021_PCTL_G_PMUX,MUXF_SDIO_D1,0)
       SC7021_IOPAD(19,SC7021_PCTL_G_PMUX,MUXF_SDIO_D0,0)
       SC7021_IOPAD(21,SC7021_PCTL_G_PMUX,MUXF_SDIO_CLK,0)
       SC7021_IOPAD(23,SC7021_PCTL_G_PMUX,MUXF_SDIO_CMD,0)
       SC7021_IOPAD(25,SC7021_PCTL_G_PMUX,MUXF_SDIO_D3,0)
       SC7021_IOPAD(27,SC7021_PCTL_G_PMUX,MUXF_SDIO_D2,0)
  >;
 };
 /* for all eth */
 ethA_pins: pinmux_ethA_pins {
  sppctl,pins = <
       SC7021_IOPAD(40,SC7021_PCTL_G_PMUX,MUXF_L2SW_CLK_OUT,0)
       SC7021_IOPAD(34,SC7021_PCTL_G_PMUX,MUXF_L2SW_MAC_SMI_MDC,0)
       SC7021_IOPAD(33,SC7021_PCTL_G_PMUX,MUXF_L2SW_MAC_SMI_MDIO,0)
  >;
 };
 eth0_pins: pinmux_eth0_pins {
  sppctl,pins = <
       SC7021_IOPAD(35,SC7021_PCTL_G_PMUX,MUXF_L2SW_LED_FLASH0,0)
       SC7021_IOPAD(44,SC7021_PCTL_G_PMUX,MUXF_L2SW_LED_ON0,0)

       SC7021_IOPAD(43,SC7021_PCTL_G_PMUX,MUXF_L2SW_P0_MAC_RMII_TXEN,0)
       SC7021_IOPAD(41,SC7021_PCTL_G_PMUX,MUXF_L2SW_P0_MAC_RMII_TXD0,0)
       SC7021_IOPAD(42,SC7021_PCTL_G_PMUX,MUXF_L2SW_P0_MAC_RMII_TXD1,0)
       SC7021_IOPAD(37,SC7021_PCTL_G_PMUX,MUXF_L2SW_P0_MAC_RMII_CRSDV,0)
       SC7021_IOPAD(38,SC7021_PCTL_G_PMUX,MUXF_L2SW_P0_MAC_RMII_RXD0,0)
       SC7021_IOPAD(39,SC7021_PCTL_G_PMUX,MUXF_L2SW_P0_MAC_RMII_RXD1,0)
       SC7021_IOPAD(36,SC7021_PCTL_G_PMUX,MUXF_L2SW_P0_MAC_RMII_RXER,0)
  >;
 };
 eth1_pins: pinmux_eth1_pins {
  sppctl,pins = <
       SC7021_IOPAD(23,SC7021_PCTL_G_PMUX,MUXF_L2SW_LED_FLASH1,0)
       SC7021_IOPAD(32,SC7021_PCTL_G_PMUX,MUXF_L2SW_LED_ON1,0)

       SC7021_IOPAD(31,SC7021_PCTL_G_PMUX,MUXF_L2SW_P1_MAC_RMII_TXEN,0)
       SC7021_IOPAD(29,SC7021_PCTL_G_PMUX,MUXF_L2SW_P1_MAC_RMII_TXD0,0)
       SC7021_IOPAD(30,SC7021_PCTL_G_PMUX,MUXF_L2SW_P1_MAC_RMII_TXD1,0)
       SC7021_IOPAD(25,SC7021_PCTL_G_PMUX,MUXF_L2SW_P1_MAC_RMII_CRSDV,0)
       SC7021_IOPAD(26,SC7021_PCTL_G_PMUX,MUXF_L2SW_P1_MAC_RMII_RXD0,0)
       SC7021_IOPAD(27,SC7021_PCTL_G_PMUX,MUXF_L2SW_P1_MAC_RMII_RXD1,0)
       SC7021_IOPAD(24,SC7021_PCTL_G_PMUX,MUXF_L2SW_P1_MAC_RMII_RXER,0)
  >;
 };

 leds_s0_def: user_leds_s0_def {
    sppctl,pins = <
      SC7021_IOPAD(8,SC7021_PCTL_G_GPIO,MUXF_GPIO,SC7021_PCTL_L_INV)
      SC7021_IOPAD(9,SC7021_PCTL_G_GPIO,0,SC7021_PCTL_L_INV)
    >;
 };
 leds_s0_slp: user_leds_s0_slp {
    sppctl,pins = <
      SC7021_IOPAD(8,SC7021_PCTL_G_GPIO,0,0)
      SC7021_IOPAD(9,SC7021_PCTL_G_GPIO,0,0)
    >;
 };
};

/* ----
 next one requires:

 CONFIG_NEW_LEDS=y
 CONFIG_LEDS_CLASS=y
 CONFIG_LEDS_GPIO=y
 CONFIG_LEDS_TRIGGERS=y
 CONFIG_LEDS_TRIGGER_HEARTBEAT=y
*/

/ {
	soc@B {
		leds {
		    pinctrl-names = "default", "sleep";
		    pinctrl-0 = <&leds_s0_def>;
		    pinctrl-1 = <&leds_s0_slp>;
		    compatible = "gpio-leds";
		    led@2 {
			label = "SG";
			gpios = <&pctl 8 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "heartbeat";
			default-state = "off";
		    };
		};
	};
};
